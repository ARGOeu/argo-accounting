"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2437],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=i,f=u["".concat(c,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4499:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(7462),i=(n(7294),n(3905));const a={id:"collect_metrics",title:"Collecting Metrics from different levels",sidebar_position:10},o=void 0,l={unversionedId:"api/collect_metrics",id:"api/collect_metrics",title:"Collecting Metrics from different levels",description:"The Accounting System offers the possibility to collect Metrics from different levels of the hierarchical structure Project -> Provider -> Installation.",source:"@site/docs/api/collect_metrics.md",sourceDirName:"api",slug:"/api/collect_metrics",permalink:"/argo-accounting/docs/api/collect_metrics",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"collect_metrics",title:"Collecting Metrics from different levels",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Resource",permalink:"/argo-accounting/docs/api/resource"},next:{title:"API Errors",permalink:"/argo-accounting/docs/api/api_errors"}},c={},s=[{value:"GET - Collecting Metrics from specific Project",id:"get---collecting-metrics-from-specific-project",level:3},{value:"Date Filtering",id:"date-filtering",level:4},{value:"GET - Collecting Metrics from specific Provider",id:"get---collecting-metrics-from-specific-provider",level:3},{value:"Date Filtering",id:"date-filtering-1",level:4},{value:"GET - Collecting Metrics from specific Installation",id:"get---collecting-metrics-from-specific-installation",level:3},{value:"Date Filtering",id:"date-filtering-2",level:4},{value:"Errors",id:"errors",level:3}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The Accounting System offers the possibility to collect Metrics from different levels of the hierarchical structure Project -> Provider -> Installation.\nYou can select the level you want, and the API returns the Metrics under it. Returned Metrics also contain the hierarchical structure they belong to, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n   "id": "6297459e0f41a20c683e9019",\n   "metric_definition_id": "62973fea0f41a20c683e9014",\n   "time_period_start": "2020-12-20T09:13:07Z",\n   "time_period_end": "2020-12-25T11:14:07Z",\n   "value": 90.0,\n   "project": "EGI-ACE",\n   "provider": "grnet",\n   "installation": "GRNET-KNS"\n}\n')),(0,i.kt)("h3",{id:"get---collecting-metrics-from-specific-project"},"[GET]"," - Collecting Metrics from specific Project"),(0,i.kt)("p",null,"You can collect all Metrics under a specific Project by executing the following GET HTTP request :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/projects/{project_id}/metrics\n\nAuthorization: Bearer {token}\n")),(0,i.kt)("p",null,"By default, the first page of 10 Metrics under that Project will be returned. For instance:"),(0,i.kt)("p",null,"Success Response ",(0,i.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'\n{\n   "size_of_page": 10,\n   "number_of_page": 1,\n   "total_elements": 12,\n   "total_pages": 2,\n   "content": [\n       {\n           "id": "6297459e0f41a20c683e9019",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 90.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974da70f41a20c683e9021",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 325.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974dcd0f41a20c683e9022",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 444.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d9b0f41a20c683e901f",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 450.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974dd00f41a20c683e9023",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 567.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d8b0f41a20c683e901a",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 904.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d8f0f41a20c683e901b",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 905.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d910f41a20c683e901c",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 906.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d950f41a20c683e901d",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 909.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974da10f41a20c683e9020",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 6000.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       }\n   ],\n   "links": [\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=1&size=10",\n           "rel": "first"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=2&size=10",\n           "rel": "last"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=1&size=10",\n           "rel": "self"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=2&size=10",\n           "rel": "next"\n       }\n   ]\n}\n')),(0,i.kt)("p",null,"You can tune the default values by using the query parameters page and size as shown in the example below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/accounting-system/projects/{project_id}/metrics?page=2&size=15\n")),(0,i.kt)("p",null,"The above request returns the second page which contains 15 Metrics. "),(0,i.kt)("p",null,"In conclusion, the aforementioned request returns all the metrics to which the client has access in a project. The range of metrics can be limited by using date filters."),(0,i.kt)("h4",{id:"date-filtering"},"Date Filtering"),(0,i.kt)("p",null,"You can limit the range of metrics by using the following URL parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"start"),(0,i.kt)("li",{parentName:"ul"},"end")),(0,i.kt)("p",null,"For example, if you want to retrieve metrics whose ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_end")," are in the date range ","[2020-01-01 to 2020-12-31]",", you can execute the following request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/accounting-system/projects/{project_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n")),(0,i.kt)("p",null,"Bear in mind that both parameters should be in the format ",(0,i.kt)("inlineCode",{parentName:"p"},"YYYY-MM-DD")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"start")," cannot be after ",(0,i.kt)("inlineCode",{parentName:"p"},"end"),"."),(0,i.kt)("h3",{id:"get---collecting-metrics-from-specific-provider"},"[GET]"," - Collecting Metrics from specific Provider"),(0,i.kt)("p",null,"Respectively, you can collect all Metrics that exist in a specific Provider. To execute the following request, you need to pass the Project ID to which that Provider belongs and of course the Provider ID."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/projects/{project_id}/providers/{provider_id}/metrics\n\nAuthorization: Bearer {token}\n")),(0,i.kt)("p",null,"By default, the first page of 10 Metrics under that Provider will be returned. Of course, You can tune the default values by using the query parameters page and size."),(0,i.kt)("p",null,"In conclusion, the aforementioned request returns all the metrics to which the client has access in a specific Provider. The range of metrics can be limited by using date filters."),(0,i.kt)("h4",{id:"date-filtering-1"},"Date Filtering"),(0,i.kt)("p",null,"You can limit the range of metrics by using the following URL parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"start"),(0,i.kt)("li",{parentName:"ul"},"end")),(0,i.kt)("p",null,"For example, if you want to retrieve metrics whose ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_end")," are in the date range ","[2020-01-01 to 2020-12-31]",", you can execute the following request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/projects/{project_id}/providers/{provider_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n")),(0,i.kt)("p",null,"Bear in mind that both parameters should be in the format ",(0,i.kt)("inlineCode",{parentName:"p"},"YYYY-MM-DD")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"start")," cannot be after ",(0,i.kt)("inlineCode",{parentName:"p"},"end"),"."),(0,i.kt)("h3",{id:"get---collecting-metrics-from-specific-installation"},"[GET]"," - Collecting Metrics from specific Installation"),(0,i.kt)("p",null,"Likewise, you can collect all Metrics that exist in a specific Installation. To execute the following request, you need to pass the Installation ID."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/installations/{installation_id}/metrics\n\nAuthorization: Bearer {token}\n\n")),(0,i.kt)("p",null,"By default, the first page of 10 Metrics under that Installation will be returned. Of course, You can tune the default values by using the query parameters page and size."),(0,i.kt)("p",null,"In conclusion, the aforementioned request returns all the metrics to which the client has access in a particular Installation. The range of metrics can be limited by using date filters."),(0,i.kt)("h4",{id:"date-filtering-2"},"Date Filtering"),(0,i.kt)("p",null,"You can limit the range of metrics by using the following URL parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"start"),(0,i.kt)("li",{parentName:"ul"},"end")),(0,i.kt)("p",null,"For example, if you want to retrieve metrics whose ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"time_period_end")," are in the date range ","[2020-01-01 to 2020-12-31]",", you can execute the following request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET /accounting-system/installations/{installation_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n")),(0,i.kt)("p",null,"Bear in mind that both parameters should be in the format ",(0,i.kt)("inlineCode",{parentName:"p"},"YYYY-MM-DD")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"start")," cannot be after ",(0,i.kt)("inlineCode",{parentName:"p"},"end"),"."),(0,i.kt)("h3",{id:"errors"},"Errors"),(0,i.kt)("p",null,"Please refer to section ",(0,i.kt)("a",{parentName:"p",href:"./api_errors"},"Errors")," to see all possible Errors."))}d.isMDXComponent=!0}}]);