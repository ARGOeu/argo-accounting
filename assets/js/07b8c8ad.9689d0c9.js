"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4036],{5385:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>a});var t=i(4848),r=i(8453);const c={id:"metric_definition",title:"Metric Definition",sidebar_position:2},s=void 0,o={id:"api/metric_definition",title:"Metric Definition",description:"Metrics are measures of quantitative assessment commonly used for assessing, comparing, and tracking usage or performance of a service. They are the main indicators.",source:"@site/docs/api/metric_definition.md",sourceDirName:"api",slug:"/api/metric_definition",permalink:"/argo-accounting/docs/api/metric_definition",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"metric_definition",title:"Metric Definition",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Client",permalink:"/argo-accounting/docs/api/client"},next:{title:"Project",permalink:"/argo-accounting/docs/api/project"}},d={},a=[{value:"[POST] - Create a Metric Definition",id:"post---create-a-metric-definition",level:3},{value:"[GET] - Fetch a Metric Definition",id:"get---fetch-a-metric-definition",level:3},{value:"[PATCH] - Update a Metric Definition",id:"patch---update-a-metric-definition",level:3},{value:"[DELETE]  - Delete a Metric Definition",id:"delete----delete-a-metric-definition",level:3},{value:"[GET]  - Fetch all the Metric Definitions",id:"get----fetch-all-the-metric-definitions",level:3},{value:"[POST] - Search for Metric Definitions",id:"post---search-for-metric-definitions",level:3},{value:"Example 1:",id:"example-1",level:4},{value:"Example 2:",id:"example-2",level:4},{value:"Errors",id:"errors",level:3}];function l(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Metrics are measures of quantitative assessment commonly used for assessing, comparing, and tracking usage or performance of a service. They are the main indicators."}),"\n",(0,t.jsx)(n.p,{children:"A metric definition is the way to represent and describe the type of the metrics. A Metric Definition consists of the metadata describing a Metric. The client can interact through several operations with the API in order to create, update, delete or fetch a Metric Definition. The aforementioned operations are described below."}),"\n",(0,t.jsx)(n.p,{children:"The Metric Definition can be expressed by the following structure:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"A unique identifier"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"metric_name"}),(0,t.jsx)(n.td,{children:"Name to be used for describing a Metric"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"metric_description"}),(0,t.jsx)(n.td,{children:"Short Description of a Metric Definition"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"/argo-accounting/docs/api/unit_type",children:"unit_type"})}),(0,t.jsx)(n.td,{children:"Expresses and measures physical quantities used in various infrastructures, service providers, and projects."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"/argo-accounting/docs/api/metric_type",children:"metric_type"})}),(0,t.jsx)(n.td,{children:"Defines how the physical quantities have been collected"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"post---create-a-metric-definition",children:"[POST] - Create a Metric Definition"}),"\n",(0,t.jsx)(n.p,{children:"Upon creating a new Metric Definition, the client should be able to forward a Metric to the Accounting System API.\nThe client can submit a new Metric Definition by executing the following POST request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'POST /accounting-system/metric-definitions\n\nContent-type: application/json\nAuthorization: Bearer {token}\n\n{\n    "metric_name" : "number_of_users",\n    "metric_description" : "Number of users",\n    "unit_type" : "#",\n    "metric_type" : "aggregated"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Upon inserting the record into the database, the API returns the Metric Definition enhanced with the metric_definition_id :"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"201 CREATED"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n    "metric_definition_id": "61dc142f6a278e43e8d6b3be",\n    "metric_name" : "number_of_users",\n    "metric_description" : "Number of users",\n    "unit_type" : "#",\n    "metric_type" : "aggregated",\n    "creator_id": "115143399384cc3177df5377691ccdbb284cb245fad1c@aai.eosc-portal.eu"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get---fetch-a-metric-definition",children:"[GET] - Fetch a Metric Definition"}),"\n",(0,t.jsx)(n.p,{children:"The client should be able to fetch an already created Metric Definition. Having the id of a Metric Definition, the client can request the relevant to that id Metric Definition by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /accounting-system/metric-definitions/{metric_definition_id}\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"The response returned to the client is the following:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n    "id" : "61dff744ba5b5f60791bd09d",\n    "metric_name" : "number_of_users",\n    "metric_description" : "Number of users",\n    "unit_type" : "#",\n    "metric_type" : "aggregated"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"patch---update-a-metric-definition",children:"[PATCH] - Update a Metric Definition"}),"\n",(0,t.jsx)(n.p,{children:"The client can update a Metric Definition using the following PATCH request. The URL should be filled in with the metric definition id to be updated."}),"\n",(0,t.jsx)(n.p,{children:"Bear in mind that you cannot update an existing Metric Definition if there are Metrics assigned to it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PATCH /accounting-system/metric-definitions/{metric_definition_id}\n\nContent-type: application/json\nAuthorization: Bearer {token}\n\n{\n    attributes_to_be_updated\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"The response will be the updated entity :"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n    "updated_entity"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"In order to update the resource properties, the body of the request must contain an updated representation of Metric Definition. For example, to edit the metric type, send the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'PATCH /accounting-system/metric-definitions/{metric_definition_id}\n\nContent-type: application/json\nAuthorization: Bearer {token}\n\n{  \n    "metric_type": "metric_type_to_be_updated"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"You can update a part or all attributes of the Metric Definition. The empty or null values are ignored."}),"\n",(0,t.jsx)(n.h3,{id:"delete----delete-a-metric-definition",children:"[DELETE]  - Delete a Metric Definition"}),"\n",(0,t.jsx)(n.p,{children:"You can only delete a Metric Definition that does not have any Metrics assigned to it. If the Metric Definition has no Metrics, you can safely delete it."}),"\n",(0,t.jsx)(n.p,{children:"Metric Definition can be deleted by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DELETE /accounting-system/metric-definitions/{metric_definition_id}\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"If the operation is successful, you get the following response:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "code": 200,\n   "message": "The Metric Definition has been deleted successfully."\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get----fetch-all-the-metric-definitions",children:"[GET]  - Fetch all the Metric Definitions"}),"\n",(0,t.jsx)(n.p,{children:"You can also fetch all the Metric Definitions that exist to the accounting system."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /accounting-system/metric-definitions\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"If the operation is successful, you get the following response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "size_of_page": 3,\n  "number_of_page": 1,\n  "total_elements": 3,\n  "total_pages": 1,\n  "content": [\n    {\n      "metric_definition_id": "6360c5d63b4ae429c92409d7",\n      "metric_name": "number_of_active_users",\n      "metric_description": "Number of active users",\n      "unit_type": "#",\n      "metric_type": "aggregated"\n    },\n    {\n      "metric_definition_id": "6360c7ad3b4ae429c92409dd",\n      "metric_name": "number_of_inactive_users",\n      "metric_description": "Number of inactive users",\n      "unit_type": "#",\n      "metric_type": "aggregated"\n    },\n    {\n      "metric_definition_id": "6360c88c3b4ae429c92409de",\n      "metric_name": "number_of_users_deleted",\n      "metric_description": "Number of deleted users",\n      "unit_type": "s",\n      "metric_type": "count"\n    }\n  ],\n  "links": []\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"post---search-for-metric-definitions",children:"[POST] - Search for Metric Definitions"}),"\n",(0,t.jsx)(n.p,{children:"You can search on Installations, to find the ones corresponding to the given search criteria. Metric Definitions can be searched by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST accounting-system/metric-definition/search\nContent-Type: application/json\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example 1:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "type": "query",\n  "field": "metric_type",\n  "values": "count",\n  "operand": "eq"\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"example-2",children:"Example 2:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "type": "filter",\n  "operator": "OR",\n  "criteria": [\n    {\n      "type": "query",\n      "field": "metric_name",\n      "values": "mdname1",\n      "operand": "eq"\n    },\n    {\n      "type": "filter",\n      "operator": "AND",\n      "criteria": [\n        {\n          "type": "query",\n          "field": "metric_type",\n          "values": "count",\n          "operand": "eq"\n        },\n        {\n          "type": "query",\n          "field": "unit_type",\n          "values": "#",\n          "operand": "eq"\n        }\n      ]\n    }\n    \n'})}),"\n",(0,t.jsxs)(n.p,{children:["The context of the request should be a json object. The syntax of the json object , is described ",(0,t.jsxs)("b",{children:[" ",(0,t.jsx)("a",{href:"https://argoeu.github.io/argo-accounting/docs/guides/search-filter",children:"here"})]}),"\nIf the operation is successful, you get a list of metrics, for example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n    "size_of_page": 1,\n    "number_of_page": 1,\n    "total_elements": 1,\n    "total_pages": 1,\n    "content": [\n        {\n            "metric_definition_id": "6360c7ad3b4ae429c92409dd",\n            "metric_name": "cpu",\n            "metric_description": "CPU metric definition",\n            "unit_type": "#",\n            "metric_type": "aggregated"\n        }\n    ],\n    "links": []\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"errors",children:"Errors"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to section ",(0,t.jsx)(n.a,{href:"./api_errors",children:"Errors"})," to see all possible Errors."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(6540);const r={},c=t.createContext(r);function s(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);