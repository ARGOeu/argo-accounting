"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6241],{2460:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var t=r(4848),i=r(8453);const o={id:"provider",title:"Provider",sidebar_position:4},s="Provider",a={id:"api/provider",title:"Provider",description:"As Provider, we refer to the Organisation that offers at least one installation",source:"@site/docs/api/provider.md",sourceDirName:"api",slug:"/api/provider",permalink:"/argo-accounting/docs/api/provider",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"provider",title:"Provider",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Project",permalink:"/argo-accounting/docs/api/project"},next:{title:"Installation",permalink:"/argo-accounting/docs/api/installation"}},c={},d=[{value:"Registering Provider by following the EOSC Onboarding Process at becomeAProvider",id:"registering-provider-by-following-the-eosc-onboarding-process-at-becomeaprovider",level:2},{value:"Registering Provider through Accounting System API",id:"registering-provider-through-accounting-system-api",level:2},{value:"[POST] - Create a new Provider",id:"post---create-a-new-provider",level:2},{value:"[DELETE] - Delete an existing Provider",id:"delete---delete-an-existing-provider",level:2},{value:"[PATCH] - Update an existing Provider",id:"patch---update-an-existing-provider",level:2},{value:"[GET] - Fetch a registered Provider",id:"get---fetch-a-registered-provider",level:2},{value:"[GET] - Fetch all registered Providers",id:"get---fetch-all-registered-providers",level:2},{value:"[POST] - Access Control Entry for a particular Provider of a specific Project",id:"post---access-control-entry-for-a-particular-provider-of-a-specific-project",level:2},{value:"[POST] - Search for Providers",id:"post---search-for-providers",level:2},{value:"Example 1",id:"example-1",level:3},{value:"Example 2",id:"example-2",level:3},{value:"Errors",id:"errors",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"provider",children:"Provider"}),"\n",(0,t.jsx)(n.p,{children:"As Provider, we refer to the Organisation that offers at least one installation\nto a specific project."}),"\n",(0,t.jsx)(n.p,{children:"The Provider can either be registered by communicating with EOSC Resource\nCatalogue, or you can create a new Provider by using the endpoints the\nAccounting Service provides."}),"\n",(0,t.jsxs)(n.h2,{id:"registering-provider-by-following-the-eosc-onboarding-process-at-becomeaprovider",children:["Registering Provider by following the EOSC Onboarding Process at ",(0,t.jsx)(n.a,{href:"https://providers.eosc-portal.eu/becomeAProvider",children:"becomeAProvider"})]}),"\n",(0,t.jsx)(n.p,{children:"The Accounting System communicates with EOSC Providers to retrieve the available\nProviders.\nA cron job, which runs every day at 12 am, collects the Providers and stores them\nin the database. From the response we receive we keep specific information\nwhich is stored in the collection named Provider. The collection has the\nfollowing structure:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"Provider ID."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"name"}),(0,t.jsx)(n.td,{children:"Provider name."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"website"}),(0,t.jsx)(n.td,{children:"Url of Provider website."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"abbreviation"}),(0,t.jsx)(n.td,{children:"Provider abbreviation."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"logo"}),(0,t.jsx)(n.td,{children:"Url of Provider logo."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"registering-provider-through-accounting-system-api",children:"Registering Provider through Accounting System API"}),"\n",(0,t.jsx)(n.p,{children:"If the Provider is not registered in the EOSC Resource Catalogue, the API\noffers\nthe functionality to create a new one. Below, we will describe the available\noperations regarding the Provider that you can interact with."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Bear in mind that"})," the Provider response contains the property ",(0,t.jsx)(n.code,{children:"creator_id"}),".\nIf the ",(0,t.jsx)(n.code,{children:"creator_id"})," is empty, the Provider comes from the EOSC Resource\nCatalogue. Otherwise, it was generated through the Accounting Service."]}),"\n",(0,t.jsx)(n.h2,{id:"post---create-a-new-provider",children:"[POST] - Create a new Provider"}),"\n",(0,t.jsx)(n.p,{children:"You can submit a new Provider by executing the following POST request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'POST /accounting-system/providers\n\nContent-type: application/json\nAuthorization: Bearer {token}\n\n{\n  "id" : "grnet",\n  "name" : "National Infrastructures for Research and Technology",\n  "website" : "https://www.grnet.gr/",\n  "abbreviation" : "GRNET",\n  "logo": : "https://grnet.gr/wp-content/uploads/sites/13/2016/04/GRNET_Logo_Transparent-e1431694322566-1.png"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The response is the stored Provider:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"201 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "id" : "grnet",\n  "name" : "National Infrastructures for Research and Technology",\n  "website" : "https://www.grnet.gr/",\n  "abbreviation" : "GRNET",\n  "logo": : "https://grnet.gr/wp-content/uploads/sites/13/2016/04/GRNET_Logo_Transparent-e1431694322566-1.png",\n  "creator_id": "115143399384cc3177df5377691ccdbb284cb245fad1c@aai.eosc-portal.eu"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"delete---delete-an-existing-provider",children:"[DELETE] - Delete an existing Provider"}),"\n",(0,t.jsx)(n.p,{children:"You can also delete an existing Provider registered through the Accounting\nSystem API by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DELETE /accounting-system/providers/{provider_id}\n\nAuthorization: Bearer {token}\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"If the deletion is successful the following response is returned:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "code": 200,\n   "message": "Provider has been deleted successfully."\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Finally, it should be noted that deleting Providers which derive from the\nEOSC Resource Catalogue  is not allowed."})}),"\n",(0,t.jsx)(n.h2,{id:"patch---update-an-existing-provider",children:"[PATCH] - Update an existing Provider"}),"\n",(0,t.jsx)(n.p,{children:"You can update an existing Provider registered through the Accounting System\nAPI by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'PATCH /accounting-system/providers/{provider_id}\n\nContent-type: application/json\nAuthorization: Bearer {token}\n\n{\n  "id" : "id to be updated",\n  "name" : "name to be updated",\n  "website" : "website to be updated",\n  "abbreviation" : "abbreviation to be updated",\n  "logo" : "logo to be updated"\n}\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"The body of the request must contain an updated representation of Provider.\nYou can update a part or all attributes of the Provider. The empty or null\nvalues are ignored."}),"\n",(0,t.jsx)(n.p,{children:"The response will be the updated entity :"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "updated_entity"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Finally, it should be noted that updating Providers which derive from the\nEOSC Resource Catalogue is not allowed."})}),"\n",(0,t.jsx)(n.h2,{id:"get---fetch-a-registered-provider",children:"[GET] - Fetch a registered Provider"}),"\n",(0,t.jsx)(n.p,{children:"You can either fetch a Provider registered through the Accounting System\nAPI or EOSC Resource Catalogue by executing the following GET HTTP request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /accounting-system/providers/{provider_id}\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"The response is as follows:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "id": "osmooc",\n   "name": "Open Science MOOC",\n   "website": "https://opensciencemooc.eu/",\n   "abbreviation": "OSMOOC",\n   "logo": "https://opensciencemooc.eu/assets/img/osm/osm-logo.png",\n   "creator_id": "115143399384cc3177df5377691ccdbb284cb245fad1c@aai.eosc-portal.eu"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"get---fetch-all-registered-providers",children:"[GET] - Fetch all registered Providers"}),"\n",(0,t.jsx)(n.p,{children:"Essentially, the following endpoint returns all Providers available on the EOSC\nResource Catalogue as well as all Providers registered through the Accounting\nSystem API. By default, the first page of 10 Providers will be returned."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /accounting-system/providers\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can tune the default values by using the query parameters page and size as\nshown in the example below."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET /accounting-system/providers?page=2&size=15\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,t.jsx)(n.p,{children:"The above request returns the second page which contains 15 providers:"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "size_of_page": 15,\n   "number_of_page": 2,\n   "total_elements": 237,\n   "total_pages": 16,\n   "content": [\n       {\n           "id": "ubora",\n           "name": "Open Biomedical Engineering e-platform for Innovation\n                   through Education",\n           "website": "http://ubora-biomedical.org/",\n           "abbreviation": "UBORA",\n           "logo": "http://ubora-biomedical.org/wp-content/uploads/2017/01/UBORA-Logo-Final-JPEGb.jpg",\n           "creator_id": ""\n       },\n       {\n           "id": "bioexcel",\n           "name": "BioExcel Centre of Excellence",\n           "website": "https://bioexcel.eu/",\n           "abbreviation": "BIOEXCEL",\n           "logo": "https://bioexcel.eu/wp-content/uploads/2017/02/Bioexcell_logo_payoff_1080px_transp.png",\n           "creator_id": ""\n       },\n       {\n           "id": "surf-nl",\n           "name": "SURF",\n           "website": "https://www.surf.nl/",\n           "abbreviation": "SURF",\n           "logo": "https://www.surf.nl/themes/surf/logo.svg",\n           "creator_id": ""\n       },\n       {\n           "id": "emso_eric",\n           "name": "European Multidisciplinary Seafloor and water column Observatory",\n           "website": "http://emso.eu",\n           "abbreviation": "EMSO ERIC",\n           "logo": "http://emso.eu/wp-content/uploads/2018/03/logo-w-300.png",\n           "creator_id": ""\n       },\n       {\n           "id": "elixir-belgium",\n           "name": "ELIXIR Belgium",\n           "website": "https://www.elixir-belgium.org/",\n           "abbreviation": "ELIXIR Belgium",\n           "logo": "https://www.elixir-belgium.org/sites/default/files/logo.jpg",\n           "creator_id": ""\n       },\n           "id": "cyi",\n           "name": "The Cyprus Institute",\n           "website": "https://www.cyi.ac.cy/",\n           "abbreviation": "CyI",\n           "logo": "https://numismatics-medieval.dioptra.cyi.ac.cy/sites/default/files/CyI.png",\n           "creator_id": ""\n       },\n       {\n           "id": "uni-freiburg",\n           "name": "University of Freiburg",\n           "website": "https://www.uni-freiburg.de",\n           "abbreviation": "UNI FREIBURG",\n           "logo": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSH9gnjhQ5503SSs1_6E8Rr7UITWeacwmm3u3rK1eSdLQiKdywpqQ&s",\n           "creator_id": ""\n       },\n       {\n           "id": "dcc-uk",\n           "name": "Digital Curation Centre",\n           "website": "https://www.dcc.ac.uk/",\n           "abbreviation": "DMPonline",\n           "logo": "https://arts.unimelb.edu.au/__data/assets/image/0009/2913867/DDC2019.jpg",\n           "creator_id": ""\n       },\n       {\n           "id": "cloudferro",\n           "name": "CloudFerro",\n           "website": "https://cloudferro.com/",\n           "abbreviation": "CloudFerro",\n           "logo": "https://cf2.cloudferro.com:8080/94d2acacf10346a18c289981f4d0bd33:cloudferro_cms/static/img/cloudferro-logo.svg",\n           "creator_id": ""\n       },\n       {\n           "id": "psnc",\n           "name": "Poznan Supercomputing and Networking Center",\n           "website": "https://www.psnc.pl/",\n           "abbreviation": "PSNC",\n           "logo": "https://www.psnc.pl/files/PSNC_logo_.svg",\n           "creator_id": ""\n       },\n       {\n           "id": "forschungsdaten",\n           "name": "Forschungsdaten.info",\n           "website": "https://www.forschungsdaten.info/praxis-kompakt/english-pages/",\n           "abbreviation": "forschungsdaten",\n           "logo": "https://www.forschungsdaten.info/typo3temp/secure_downloads/99679/0/ba8ae03722cb4bfb8baa63cfb1ab045bb7a03c78/csm_logo_long_seeblau100_af47d6577b.png",\n           "creator_id": ""\n       },\n       {\n           "id": "umg-br",\n           "name": "University of Minas Gerais",\n           "website": "https://ufmg.br/",\n           "abbreviation": "UMG",\n           "logo": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Symbolfumg.jpg/375px-Symbolfumg.jpg",\n           "creator_id": ""\n       },\n       {\n           "id": "coard",\n           "name": "Collaborative Open Access Research and Development",\n           "website": "https://coard.community/",\n           "abbreviation": "COARD",\n           "logo": "https://images.squarespace-cdn.com/content/v1/5f44f92bd523407260108ba6/1598444273981-CRFZ1SC35B9VTRNT0QUS/Coard+logo%402x.png",\n           "creator_id": ""\n       },\n       {\n           "id": "erasmusmc",\n           "name": "Erasmus Medical Center",\n           "website": "https://www.erasmusmc.nl/",\n           "abbreviation": "Erasmus MC",\n           "logo": "https://seeklogo.com/images/E/Erasmus_MC-logo-B857CA0725-seeklogo.com.png",\n           "creator_id": ""\n       },\n       {\n           "id": "osmooc",\n           "name": "Open Science MOOC",\n           "website": "https://opensciencemooc.eu/",\n           "abbreviation": "OSMOOC",\n           "logo": "https://opensciencemooc.eu/assets/img/osm/osm-logo.png",\n           "creator_id": ""\n       }\n   ],\n   "links": [\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/providers?page=1&size=15",\n           "rel": "first"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/providers?page=16&size=15",\n           "rel": "last"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/providers?page=2&size=15",\n           "rel": "self"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/providers?page=1&size=15",\n           "rel": "prev"\n       },\n       {\n           "href": "https://acc.devel.argo.grnet.gr/accounting-system/providers?page=3&size=15",\n           "rel": "next"\n       }\n   ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"post---access-control-entry-for-a-particular-provider-of-a-specific-project",children:"[POST] - Access Control Entry for a particular Provider of a specific Project"}),"\n",(0,t.jsx)(n.p,{children:"Any client can have different responsibilities at different Providers. The\nactions the client can perform at each Provider are determined by the role\nand the permissions it has."}),"\n",(0,t.jsx)(n.p,{children:"To grant a role to a client on a specific Provider of a Project, you have to\nexecute the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'POST /accounting-system/projects/{project_id}/providers/{provider_id}/acl/{who}\n\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  "roles":[\n     {role_name}\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["where ",(0,t.jsx)(n.code,{children:"{who}"})," is the client ID in which the roles will be assigned."]}),"\n",(0,t.jsx)(n.p,{children:"The response is :"}),"\n",(0,t.jsxs)(n.p,{children:["Success Response ",(0,t.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "code": 200,\n   "message": "Provider Access Control was successfully created."\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"post---search-for-providers",children:"[POST] - Search for Providers"}),"\n",(0,t.jsx)(n.p,{children:"You can search on Providers, to find the ones corresponding to the given search\ncriteria. Providers  can be searched by executing the following request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST accounting-system/providers/search\nContent-Type: application/json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-1",children:"Example 1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n\n           "type":"query",\n           "field": "name",\n           "values":"European Space Agency",\n           "operand": "eq"\n   }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"example-2",children:"Example 2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "type": "filter",\n  "operator": "OR",\n  "criteria": [\n    {\n\n           "type":"query",\n           "field": "name",\n           "values":"European Space Agency",\n           "operand": "eq"\n   },\n    {\n\n           "type":"query",\n           "field": "abbreviation",\n           "values":"SITES",\n           "operand": "eq"\n   }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The context of the request should be a JSON object. The syntax of the JSON\nobject is described ",(0,t.jsx)(n.a,{href:"https://argoeu.github.io/argo-accounting/docs/guides/search-filter",children:(0,t.jsx)(n.strong,{children:"here"})}),".\nIf the operation is successful, you get a list of providers."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n   "size_of_page": 2,\n   "number_of_page": 1,\n   "total_elements": 2,\n   "total_pages": 1,\n   "content": [\n       {\n           "id": "esa-int",\n           "name": "European Space Agency",\n           "website": "https://www.esa.int/",\n           "abbreviation": "ESA",\n           "logo": "https://www.esa.int/var/esa/storage/images/esa_multimedia/images/2014/03/b_esa_b/14337112-1-eng-GB/b_ESA_b_pillars.png"\n       },\n       {\n           "id": "sites",\n           "name": "Swedish Infrastructure for Ecosystem Science",\n           "website": "https://www.fieldsites.se/en-GB",\n           "abbreviation": "SITES",\n           "logo": "https://dst15js82dk7j.cloudfront.net/231546/95187636-P5q11.png"\n       }\n   ],\n   "links": []\n\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Otherwise, an empty response will be returned.\n",(0,t.jsx)(n.strong,{children:"Keep in mind that"})," to execute the above operation, you must have been\nassigned a role containing the Provider Acl permission."]}),"\n",(0,t.jsx)(n.h2,{id:"errors",children:"Errors"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to section ",(0,t.jsx)(n.a,{href:"./api_errors",children:"Errors"})," to see all possible Errors."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var t=r(6540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);