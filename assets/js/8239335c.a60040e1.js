"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5667],{5285:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});var i=t(4848),r=t(8453);const c={id:"collect_metrics",title:"Collecting Metrics from different levels",sidebar_position:10},o="Collecting Metrics from different levels",s={id:"api/collect_metrics",title:"Collecting Metrics from different levels",description:"The Accounting System offers the possibility to collect Metrics from different",source:"@site/docs/api/collect_metrics.md",sourceDirName:"api",slug:"/api/collect_metrics",permalink:"/argo-accounting/docs/api/collect_metrics",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"collect_metrics",title:"Collecting Metrics from different levels",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Resource",permalink:"/argo-accounting/docs/api/resource"},next:{title:"API Errors",permalink:"/argo-accounting/docs/api/api_errors"}},a={},l=[{value:"[GET] - Collecting Metrics from specific Project",id:"get---collecting-metrics-from-specific-project",level:2},{value:"Date Filtering for Project",id:"date-filtering-for-project",level:3},{value:"[GET] - Collecting Metrics from specific Provider",id:"get---collecting-metrics-from-specific-provider",level:2},{value:"Date Filtering for Provider",id:"date-filtering-for-provider",level:3},{value:"[GET] - Collecting Metrics from specific Installation",id:"get---collecting-metrics-from-specific-installation",level:2},{value:"Date Filtering for Installation",id:"date-filtering-for-installation",level:3},{value:"Errors",id:"errors",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"collecting-metrics-from-different-levels",children:"Collecting Metrics from different levels"}),"\n",(0,i.jsx)(n.p,{children:"The Accounting System offers the possibility to collect Metrics from different\nlevels of the hierarchical structure Project -> Provider -> Installation.\nYou can select the level you want, and the API returns the Metrics under it.\nReturned Metrics also contain the hierarchical structure they belong to, for\nexample:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n   "id": "6297459e0f41a20c683e9019",\n   "metric_definition_id": "62973fea0f41a20c683e9014",\n   "time_period_start": "2020-12-20T09:13:07Z",\n   "time_period_end": "2020-12-25T11:14:07Z",\n   "value": 90.0,\n   "project": "EGI-ACE",\n   "provider": "grnet",\n   "installation": "GRNET-KNS"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"get---collecting-metrics-from-specific-project",children:"[GET] - Collecting Metrics from specific Project"}),"\n",(0,i.jsx)(n.p,{children:"You can collect all Metrics under a specific Project by executing the following\nGET HTTP request :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /accounting-system/projects/{project_id}/metrics\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, the first page of 10 Metrics under that Project will be returned.\nFor instance:"}),"\n",(0,i.jsxs)(n.p,{children:["Success Response ",(0,i.jsx)(n.code,{children:"200 OK"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\n{\n   "size_of_page": 10,\n   "number_of_page": 1,\n   "total_elements": 12,\n   "total_pages": 2,\n   "content": [\n       {\n           "id": "6297459e0f41a20c683e9019",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 90.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974da70f41a20c683e9021",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 325.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974dcd0f41a20c683e9022",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 444.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d9b0f41a20c683e901f",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 450.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974dd00f41a20c683e9023",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 567.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d8b0f41a20c683e901a",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 904.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d8f0f41a20c683e901b",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 905.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d910f41a20c683e901c",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 906.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974d950f41a20c683e901d",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 909.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       },\n       {\n           "id": "62974da10f41a20c683e9020",\n           "metric_definition_id": "62973fea0f41a20c683e9014",\n           "time_period_start": "2020-12-20T09:13:07Z",\n           "time_period_end": "2020-12-25T11:14:07Z",\n           "value": 6000.0,\n           "project": "EGI-ACE",\n           "provider": "grnet",\n           "installation": "GRNET-KNS"\n       }\n   ],\n   "links": [\n       {\n           "href":\n"https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=1&size=10",\n           "rel": "first"\n       },\n       {\n           "href":\n"https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=2&size=10",\n           "rel": "last"\n       },\n       {\n           "href":\n"https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=1&size=10",\n           "rel": "self"\n       },\n       {\n           "href":\n"https://acc.devel.argo.grnet.gr/accounting-system/projects/101017567/metrics?page=2&size=10",\n           "rel": "next"\n       }\n   ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can tune the default values by using the query parameters page and size as\nshown in the example below."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET\n/accounting-system/accounting-system/projects/{project_id}/metrics?page=2&size=15\n"})}),"\n",(0,i.jsx)(n.p,{children:"The above request returns the second page which contains 15 Metrics."}),"\n",(0,i.jsx)(n.p,{children:"In conclusion, the aforementioned request returns all the metrics to which the\nclient has access in a project. The range of metrics can be limited by using\ndate filters."}),"\n",(0,i.jsx)(n.h3,{id:"date-filtering-for-project",children:"Date Filtering for Project"}),"\n",(0,i.jsx)(n.p,{children:"You can limit the range of metrics by using the following URL parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"start"}),"\n",(0,i.jsx)(n.li,{children:"end"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you want to retrieve metrics whose ",(0,i.jsx)(n.code,{children:"time_period_start"})," and\n",(0,i.jsx)(n.code,{children:"time_period_end"})," are in the date range [2020-01-01 to 2020-12-31], you can\nexecute the following request:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET\n/accounting-system/accounting-system/projects/{project_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Bear in mind that both parameters should be in the format ",(0,i.jsx)(n.code,{children:"YYYY-MM-DD"})," and\n",(0,i.jsx)(n.code,{children:"start"})," cannot be after ",(0,i.jsx)(n.code,{children:"end"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"get---collecting-metrics-from-specific-provider",children:"[GET] - Collecting Metrics from specific Provider"}),"\n",(0,i.jsx)(n.p,{children:"Respectively, you can collect all Metrics that exist in a specific Provider. To\nexecute the following request, you need to pass the Project ID to which that\nProvider belongs and of course the Provider ID."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /accounting-system/projects/{project_id}/providers/{provider_id}/metrics\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, the first page of 10 Metrics under that Provider will be returned.\nOf course, You can tune the default values by using the query parameters page\nand size."}),"\n",(0,i.jsx)(n.p,{children:"In conclusion, the aforementioned request returns all the metrics to which the\nclient has access in a specific Provider. The range of metrics can be limited\nby using date filters."}),"\n",(0,i.jsx)(n.h3,{id:"date-filtering-for-provider",children:"Date Filtering for Provider"}),"\n",(0,i.jsx)(n.p,{children:"You can limit the range of metrics by using the following URL parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"start"}),"\n",(0,i.jsx)(n.li,{children:"end"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you want to retrieve metrics whose ",(0,i.jsx)(n.code,{children:"time_period_start"})," and\n",(0,i.jsx)(n.code,{children:"time_period_end"})," are in the date range [2020-01-01 to 2020-12-31], you can\nexecute the following request:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET\n/accounting-system/projects/{project_id}/providers/{provider_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Bear in mind that both parameters should be in the format ",(0,i.jsx)(n.code,{children:"YYYY-MM-DD"})," and\n",(0,i.jsx)(n.code,{children:"start"})," cannot be after ",(0,i.jsx)(n.code,{children:"end"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"get---collecting-metrics-from-specific-installation",children:"[GET] - Collecting Metrics from specific Installation"}),"\n",(0,i.jsx)(n.p,{children:"Likewise, you can collect all Metrics that exist in a specific Installation. To\nexecute the following request, you need to pass the Installation ID."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /accounting-system/installations/{installation_id}/metrics\n\nAuthorization: Bearer {token}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, the first page of 10 Metrics under that Installation will be\nreturned. Of course, You can tune the default values by using the query\nparameters page and size."}),"\n",(0,i.jsx)(n.p,{children:"In conclusion, the aforementioned request returns all the metrics to which the\nclient has access in a particular Installation. The range of metrics can be\nlimited by using date filters."}),"\n",(0,i.jsx)(n.h3,{id:"date-filtering-for-installation",children:"Date Filtering for Installation"}),"\n",(0,i.jsx)(n.p,{children:"You can limit the range of metrics by using the following URL parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"start"}),"\n",(0,i.jsx)(n.li,{children:"end"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you want to retrieve metrics whose ",(0,i.jsx)(n.code,{children:"time_period_start"})," and\n",(0,i.jsx)(n.code,{children:"time_period_end"})," are in the date range [2020-01-01 to 2020-12-31], you can\nexecute the following request:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET\n/accounting-system/installations/{installation_id}/metrics?start=2020-01-01&end=2020-12-31\n\nAuthorization: Bearer {token}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Bear in mind that both parameters should be in the format ",(0,i.jsx)(n.code,{children:"YYYY-MM-DD"})," and\n",(0,i.jsx)(n.code,{children:"start"})," cannot be after ",(0,i.jsx)(n.code,{children:"end"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"errors",children:"Errors"}),"\n",(0,i.jsxs)(n.p,{children:["Please refer to section ",(0,i.jsx)(n.a,{href:"./api_errors",children:"Errors"})," to see all possible Errors."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const r={},c=i.createContext(r);function o(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);