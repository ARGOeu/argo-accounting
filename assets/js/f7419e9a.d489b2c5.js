"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7811],{7818:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var i=t(4848),r=t(8453);const o={id:"search-filter",title:"Syntax a search filter",sidebar_position:7},s=void 0,a={id:"guides/api_actions/search-filter",title:"Syntax a search filter",description:"Syntax a search filter",source:"@site/docs/guides/api_actions/search_filter.md",sourceDirName:"guides/api_actions",slug:"/guides/api_actions/search-filter",permalink:"/argo-accounting/docs/guides/api_actions/search-filter",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{id:"search-filter",title:"Syntax a search filter",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Manage Metric Definitions",permalink:"/argo-accounting/docs/guides/api_actions/metric_definition"},next:{title:"UI Actions",permalink:"/argo-accounting/docs/category/ui-actions"}},l={},c=[{value:"Syntax a search filter",id:"syntax-a-search-filter",level:3},{value:"1.  &quot;query&quot; syntax, searching a single field",id:"1--query-syntax-searching-a-single-field",level:3},{value:"Example 1: Search on a specific field, of the collection",id:"example-1-search-on-a-specific-field-of-the-collection",level:4},{value:"2.  &quot;filter&quot; syntax, search on multiple fields",id:"2--filter-syntax-search-on-multiple-fields",level:3},{value:"Example 2: Search on combinations of 2 fields, of the collection",id:"example-2-search-on-combinations-of-2-fields-of-the-collection",level:4},{value:"Example 3: Search on multiple fields, of the collection",id:"example-3-search-on-multiple-fields-of-the-collection",level:4}];function d(e){const n={br:"br",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"syntax-a-search-filter",children:"Syntax a search filter"}),"\n",(0,i.jsx)(n.p,{children:"You can apply a search operation on the Projects,Providers,Installations, Metrics,Metric Definitions,existing on the Accounting Service.You can search on a specific field or on a combination of fields of the collection. In order to apply a search request,you need to provide the search criteria on the fields,and the search operation will retrieve the results that match them"}),"\n",(0,i.jsxs)(n.p,{children:["Defining search criteria, can be done with 2 ways:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:'"query"'}),' : defines a search on a single field of the Collection. e.g on Collection Metrics : installation="insta1"\n',(0,i.jsx)(n.strong,{children:'"filter"'}),': defines a search on multiple criteria combined with operators AND/OR. A "filter" contains a combination of "query" or "filter", depending on how complex is the criterio we want to apply. e.g on Collection Metrics:\na) project="project1" AND installation="insta1"\nb) project="project1" AND (installation="insta1" OR installation="insta2")\nc) project="project2" OR [project="project1" AND (installation="insta1" OR installation="insta2")]']}),"\n",(0,i.jsx)(n.h3,{id:"1--query-syntax-searching-a-single-field",children:'1.  "query" syntax, searching a single field'}),"\n",(0,i.jsx)(n.p,{children:'The simplest search that can be performed is on a field of the collection.You need to syntax a search "query", in a json format,and provide it as body in the search request.\nThe fields that need to be defined,in order the syntax to be valid are:'}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"type"}),(0,i.jsx)(n.td,{children:"The type of the search. In the case the search is a combination of fields of the collection,it\u2019s value is \u2018query\u2019"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"field"}),(0,i.jsx)(n.td,{children:"The field of the collection on which we search"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"values"}),(0,i.jsx)(n.td,{children:"The value of the equation, and it can be of any type depending on the type of the field we search"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"operand"}),(0,i.jsxs)(n.td,{children:["The equation we want to apply on the field in order to search results.it\u2019s value can be : ",(0,i.jsx)(n.code,{children:"eq: ==, neq: !=, lt: < , lte: <= , gt: >, gte: >="})]})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "type":string,\n  "field": string ,\n  "values":primitive,\n  "operand": string\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-1-search-on-a-specific-field-of-the-collection",children:"Example 1: Search on a specific field, of the collection"}),"\n",(0,i.jsx)(n.p,{children:"You search for Metrics,that the start period is after 01-01-2022.The syntax of the query should be :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'\n{\n  "type":"query",\n  "field": "time_period_start" ,\n  "values":"2022-01-01T00:00:00Z",\n  "operand": "gt"  \n}\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2--filter-syntax-search-on-multiple-fields",children:'2.  "filter" syntax, search on multiple fields'}),"\n",(0,i.jsx)(n.p,{children:'A more complex search can be performed, combining 2 or more fields of the collection. Each time you apply an AND/OR operation on the fields of the Collection, you need to syntax a "filter". The filter can contain a combination of "query", or a combination of "filter", or a combination of "query"/"filter",depending on how complex is the search you apply.\nYou need to syntax a search "filter",in a json format, and provide it as body in the search request.\nThe fields that need to be defined,in order the syntax to be valid are:'}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"type"}),(0,i.jsx)(n.td,{children:"The type of the search. In the case the search is on 2 or more fields of the collection,it\u2019s value is \u2018filter\u2019"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"operator"}),(0,i.jsx)(n.td,{children:"The operation on which the elements in the criteria will be combined. It\u2019s values is either AND or OR"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"criteria"}),(0,i.jsx)(n.td,{children:"The specific subqueries that will be matched by the operator. Criteria is an array of objects of either \u2018query\u2019 or \u2018filter\u2019 type"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"The syntax should be as:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "type":string,\n  "operator": string ,\n  "criteria":array of \u2018query\u2019 or \u2018filter\u2019 elements\n}\n\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-2-search-on-combinations-of-2-fields-of-the-collection",children:"Example 2: Search on combinations of 2 fields, of the collection"}),"\n",(0,i.jsx)(n.p,{children:"You search for Metrics,that the start period is after 01-01-2022 AND the end period is before 01-02-2022.The syntax of the filter should be:"}),"\n",(0,i.jsx)(n.p,{children:"At first 2 subqueries should be created to define the criterio on each field."}),"\n",(0,i.jsx)(n.p,{children:"Query on start period:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'\n{\n  "type":"query",\n  "field": "time_period_start" ,\n  "values":"2022-01-01T00:00:00Z",\n  "operand": "gt"  \n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"Query on end period:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'\n{\n  "type":"query",\n  "field": "time_period_end" ,\n  "values":"2022-01-02T00:00:00Z",\n  "operand": "lt"  \n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now these two queries should be combined in a filter as:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'\n{\n  "type": "filter",\n  "operator": "AND",\n  "criteria": [\n    {\n      "type": "query",\n      "field": "time_period_start",\n      "values": "2022-01-01T00:00:00Z",\n      "operand": "gt"\n    },\n    {\n      "type": "query",\n      "field": "time_period_end",\n      "values": "2022-01-02T00:00:00Z",\n      "operand": "lt"\n    }\n  ]\n}\n\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-3-search-on-multiple-fields-of-the-collection",children:"Example 3: Search on multiple fields, of the collection"}),"\n",(0,i.jsx)(n.p,{children:"You search for Metrics,that start period is after 01-01-2022 and the end period is before 01-02-2022,OR the value is greater than 1000.The syntax of the filter should be as:"}),"\n",(0,i.jsx)(n.p,{children:"The filter to search for start period is after 01-01-2022 and the end period is before 01-02-2022,if defined as in the Example 2.\nThe query to search for value greater than 1000 is defined as :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type":"query",\n  "field": "value" ,\n  "values":"1000.0",\n  "operand": "gt"  \n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"So now we need to combine these search criteria in a filter as:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'\n{\n  "type": "filter",\n  "operator": "OR",\n  "criteria": [\n    {\n      "type": "query",\n      "field": "value",\n      "values": "1000.0",\n      "operand": "gt"\n    },\n    {\n      "type": "filter",\n      "operator": "AND",\n      "criteria": [\n        {\n          "type": "query",\n          "field": "time_period_start",\n          "values": "2022-01-01T00:00:00Z",\n          "operand": "gt"\n        },\n        {\n          "type": "query",\n          "field": "time_period_end",\n          "values": "2022-01-02T00:00:00Z",\n          "operand": "lt"\n        }\n      ]\n    }\n  ]\n}\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);